<!DOCTYPE html>
<html lang=en>
<head itemscope itemtype=http://schema.org/WebSite>
<meta charset=utf-8>
<meta content="width=device-width,initial-scale=1" name=viewport>
<link href=https://blog.bramp.net/post/2011/07/27/html5-canvas-lunch-wheel/ rel=canonical itemprop=url />
<title>HTML5 Canvas: Lunch Wheel</title>
<meta content="In the on going battle to make my lunch time more optimised I decided to learn some Javascript, and how to use the HTML5 Canvas element. Turns out it’s not that hard, and I have now created
  Click to …" name=description itemprop=description>
<meta content="Andrew Brampton" name=author itemprop=creator>
<meta content="" name=generator />
<link href=https://blog.bramp.net/index.xml rel=alternate type=application/rss+xml title=bramp.net />
<link href=https://blog.bramp.net/index.xml rel=feed type=application/rss+xml title=bramp.net />
<meta content=#4582EC name=theme-color>
<link href=/favicon.ico rel="shortcut icon" type=image/x-icon />
<link href=/images/favicon.png rel=apple-touch-icon />
<link href=/images/favicon-57x57.png rel=apple-touch-icon sizes=57x57 />
<link href=/images/favicon-72x72.png rel=apple-touch-icon sizes=72x72 />
<link href=/images/favicon-76x76.png rel=apple-touch-icon sizes=76x76 />
<link href=/images/favicon-114x114.png rel=apple-touch-icon sizes=114x114 />
<link href=/images/favicon-120x120.png rel=apple-touch-icon sizes=120x120 />
<link href=/images/favicon-144x144.png rel=apple-touch-icon sizes=144x144 />
<link href=/images/favicon-152x152.png rel=apple-touch-icon sizes=152x152 />
<link href=/images/favicon-180x180.png rel=apple-touch-icon sizes=180x180 />
<meta content=#4582EC name=msapplication-TileColor>
<meta content=/images/favicon-144x144.png name=msapplication-TileImage>
<link href=/images/favicon-192x192.png rel=icon sizes=192x192 />
<link href=/css/all.554836f8e47467127af4349dc0592099.min.css rel=stylesheet>
<link href=https://cdn.jsdelivr.net/font-hack/2.010/css/hack.min.css rel=stylesheet>
<script src="https://www.googletagmanager.com/gtag/js?id=UA-136478-5" async></script>
<script>
window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-136478-5');
</script>
<meta content=summary name=twitter:card />
<meta content=@TheBramp name=twitter:site />
<meta content=@TheBramp name=twitter:creator />
<meta content=article property=og:type />
<meta content=https://www.facebook.com/bramp property=article:author />
<meta content=2011-07-27T00:00:00&#43;07:00 property=article:published_time />
<meta content=Canvas property=article:tag />
<meta content=HTML5 property=article:tag />
<meta content=Javascript property=article:tag />
<meta content=Lunch property=article:tag />
<meta content=https://blog.bramp.net/post/2011/07/27/html5-canvas-lunch-wheel/ property=og:url />
<meta content=bramp.net property=og:site_name />
<meta content="HTML5 Canvas: Lunch Wheel" property=og:title />
<meta content="In the on going battle to make my lunch time more optimised I decided to learn some Javascript, and how to use the HTML5 Canvas element. Turns out it’s not that hard, and I have now created
  Click to …" property=og:description />
<meta content=2011-07-27T00:00:00&#43;00:00 property=og:updated_time />
<meta content=en_GB property=og:locale />
<meta content=RXqIC-7spNUYReoHFlubz8Fbqsg1fC1pE6FSgSnCNjQ name=google-site-verification />
</head>
<body itemscope itemtype=Blog>
<div id=wrapper>
<div class="navbar navbar-default">
<div class=container>
<div class=navbar-header>
<button class=navbar-toggle data-target=.navbar-collapse data-toggle=collapse type=button>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<div class=navbar-brand aria-label="About Andrew Brampton">
<a href=/ >
<img src=/images/favicon-64x64.png alt=Home class=profile-image height=64 width=64>
</a>
<div itemprop=author itemscope itemtype=https://schema.org/Person>
<a href=/about-me/ itemprop=name>Andrew Brampton</a>
<div id=social-wrapper>
<a href=https://twitter.com/TheBramp aria-label=Twitter><svg class="icon icon-twitter-square"><use xlink:href=/images/icons.svg#icon-twitter-square></use></svg></a>
<a href=https://www.linkedin.com/in/bramp aria-label=LinkedIn><svg class="icon icon-linkedin-square"><use xlink:href=/images/icons.svg#icon-linkedin-square></use></svg></a>
<a href=https://www.facebook.com/bramp aria-label=Facebook><svg class="icon icon-facebook-square"><use xlink:href=/images/icons.svg#icon-facebook-square></use></svg></a>
<a href=https://github.com/bramp aria-label=GitHub><svg class="icon icon-github-square"><use xlink:href=/images/icons.svg#icon-github-square></use></svg></a>
<a href=https://feeds.feedburner.com/brampnet aria-label="RSS feed"><svg class="icon icon-github-square"><use xlink:href=/images/icons.svg#icon-rss-square></use></svg></a>
</div>
</div>
</div>
</div>
<div class="collapse navbar-collapse">
<ul class="nav navbar-nav" role=navigation>
<li><a href=/ >Articles</a></li>
<li><a href=/about-me/ >About Me</a></li>
<li><a href=/android-app/ >Android Apps</a></li>
<li><a href=/opensource/ >Open Source</a></li>
<li><a href=/publication/ >Publications</a></li>
</ul>
</div>
</div>
</div>
<div class="container main">
<article id=article itemProp=blogPost itemscope itemtype=http://schema.org/BlogPosting>
<h1 itemprop=headline>HTML5 Canvas: Lunch Wheel</h1>
<p class=meta>
<svg class="icon icon-calendar"><use xlink:href=/images/icons.svg#icon-calendar></use></svg> <time itemprop=datePublished>2011-07-27</time>
| <a href=https://blog.bramp.net/tags/canvas/ >Canvas</a>
| <a href=https://blog.bramp.net/tags/html5/ >HTML5</a>
| <a href=https://blog.bramp.net/tags/javascript/ >Javascript</a>
| <a href=https://blog.bramp.net/tags/lunch/ >Lunch</a>
</p>
<div class=post itemprop=articleBody>
<p>In the on going battle to make my lunch time more optimised I decided to learn some Javascript, and how to use the HTML5 <a href=https://html.spec.whatwg.org/multipage/scripting.html#the-canvas-element>Canvas</a> element. Turns out it’s not that hard, and I have now created</p>
<p><a href=https://blog.bramp.net/wheel/ ><figure>
<img src=lunchwheel.png /><figcaption>
<h4>Click to win</h4>
</figcaption>
</figure>
</a></p>
<p>The Lunch Wheel]<a href=https://blog.bramp.net/wheel/ >3</a>. It helps me find lunch close to my office in the <a href="http://maps.google.com/maps?q=Courthouse,+Arlington,+VA&amp;hl=en&amp;sll=37.0625,-95.677068&amp;sspn=59.206892,135.263672&amp;z=15">Courthouse area of Arlington, VA</a>.</p>
<p>While making this I found that information on the Canvas element seemed to be lacking. For example, not many sites talked about ways to optimise or profile the javascript. Also I was disappointed to see that not all browsers supported the Canvas completely. Here is a quick list of the problems:</p>
<ol>
<li>
<p>Firefox 3.5 (linux) doubled the size of the fonts when I was setting the font in “pt”. When I switched to “em” things seemed to work consistently across browsers. 30fps</p>
</li>
<li>
<p>Android 2.2 (Droid 2) works well but slowly. It also didn’t support the <a href=https://developer.mozilla.org/En/HTML/Element/audio>Audio</a> tag. 6fps</p>
</li>
<li>
<p>Android 3.0 (Xoom Tablet) seemed to have some issues rendering half of the wheel. It looked like a bug with the hardware acceleration. I made some minor tweaks to the rendering and things started to work. 15fps</p>
</li>
<li>
<p>iPhone 3 didn’t render any of the text, but played the sound and spun the wheel. 3fps</p>
</li>
<li>
<p>iPhone 4 rendered fine but as slowly as the Android 2.2 device. 5fps</p>
</li>
<li>
<p>Chrome (linux) worked great, and was the platform I was developing on. 30fps (max)</p>
</li>
</ol>
<p>I was also using the <a href=https://html.spec.whatwg.org/multipage/scripting.html#dom-context-2d-clip>clip()</a> method to ensure the text didn’t go outside of the wheel, but this heavily impacted performance. So instead I just chopped the text manually and performance doubled.</p>
<p>I realise HTML5 is new, but I’m really hoping all browsers will start to support it consistently and across the board. I’d hate to start writing large blocks of code to cope with all the browser quirks.</p>
<p>Also, thanks to <a href=http://jquery.com/ >jQuery</a>, <a href=http://tinysort.sjeiti.com/ >TinySort</a> and <a href=http://excanvas.sourceforge.net/ >ExplorerCanvas</a> (which I still haven’t made work).</p>
<p><strong>Update:</strong> Soon to come, the ability to find your own lunch places, as well as integration with <a href=https://foursquare.com/ >foursquare</a> so you can see how popular the venues are with your friends.</p>
</div>
</article>
<div class=row>
<div class=col-sm-6>
<div class=addthis_sharing_toolbox></div>
</div>
<div class=col-sm-6>
<div class=btn-toolbar>
<div class=btn-group>
<a href=https://feeds.feedburner.com/brampnet aria-label="RSS feed" class="btn btn-sm btn-soundcloud"><svg class="icon icon-rss"><use xlink:href=/images/icons.svg#icon-rss></use></svg> Subscribe via RSS</a>
</div>
<div class=btn-group>
<a href=https://twitter.com/TheBramp class="btn btn-sm btn-twitter"><svg class="icon icon-twitter"><use xlink:href=/images/icons.svg#icon-twitter></use></svg> Follow @TheBramp</a>
</div>
</div>
</div>
</div>
<ul class=pager>
&nbsp;<li class=previous><a href=/post/2011/06/19/beware-the-%5Cr%5Cn-with-grep-f-also-perhaps-php-is-a-better-choice/ >&larr; Beware the \r\n with grep -f, also perhaps PHP is a better choice?</a></li>
&nbsp;<li class=next><a href=/post/2011/08/02/google-chrome-javascript-console.log-bug/ >Google Chrome Javascript console.log bug? &rarr;</a></li>
</ul>
<div id=disqus_thread itemprop=comment itemscope itemtype=Comment></div>
<script type=text/javascript>
var disqus_identifier = 'https:\/\/blog.bramp.net\/post\/2011\/07\/27\/html5-canvas-lunch-wheel\/';
    var disqus_title = 'HTML5 Canvas: Lunch Wheel';
    var disqus_url = 'https:\/\/blog.bramp.net\/post\/2011\/07\/27\/html5-canvas-lunch-wheel\/';
    (function() {
	    
	    
	    if (window.location.host.lastIndexOf(":1313") >= 0 || ["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
	        return;
        }

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + "bramp" + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
<br/>
<footer>
<p class="credit text-muted">&copy; 2021. All rights reserved.</p>
</footer>
</div>
</div>
<script src=/js/all.421bdc0798a792d922b399e8180168e3.min.js></script>
<script src="https://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-559846a374d7ecaa" async type=text/javascript></script>
</body>
</html>
