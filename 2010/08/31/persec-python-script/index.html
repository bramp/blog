<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Persec python script</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo"/>
  <link href="" rel="alternate" type="application/rss+xml" title="bramp.net" />
  <link href="http://bramp.net/blog/css/bootstrap.min.css" rel="stylesheet">
  <link href="http://bramp.net/blog/css/bramp.css" rel="stylesheet">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  
  
    
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-136478-5', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>
<body>

<div id = "wrapper">

  <div class="navbar navbar-default" role="navigation">
      <div class="container">

        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="navbar-brand">
            <a href="http://bramp.net/blog">
              <img src="//secure.gravatar.com/avatar/69259b422a1a9266e17977f8ec9d939e?s=64" class="profile-image" alt="Home">
            </a>
            <div>
              <a href="http://bramp.net/blog/about-me/">Andrew Brampton</a>

              <div id="social-wrapper">
              
                <a href="https://twitter.com/@TheBramp"><i class="fa fa-twitter-square"></i></a>
              
              
                <a href="https://www.linkedin.com/in/bramp"><i class="fa fa-linkedin-square"></i></a>
              
              
                <a href="https://www.facebook.com/bramp"><i class="fa fa-facebook-square"></i></a>
              
                <a href="https://github.com/bramp"><i class="fa fa-github-square"></i></a>
              
                <a href="http://bramp.net/blog/index.xml"><i class="fa fa-rss-square"></i></a>
             </div>
            </div>
          </div>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="http://bramp.net/blog/about-me/">About Me</a></li>
            <li><a href="http://bramp.net/blog/android-apps/">Android Apps</a></li>
            <li><a href="http://bramp.net/blog/posts/">Articles</a></li>
            <li><a href="http://bramp.net/blog/opensource-projects/">Open Source</a></li>
            <li><a href="http://bramp.net/blog/publications/">Publications</a></li>
          </ul>
        </div>
      </div>
    </div>

     <div class="container main">


  <div id="article">
   <h1>Persec python script</h1>
   <p class="meta"><small>&nbsp;<i class="fa fa-calendar-o"></i> 2010-08-31</small> 204 words</p> <hr/>
   <div class="post">
     <p>A while ago I wrote a python script that does a similar job to GNU&#8217;s <a href="http://linux.die.net/man/1/watch">watch</a> command. You use it like so:</p>

<pre>./persec.py [--interval=&lt;n&gt;] &lt;command&gt;
</pre>

<p>so for example</p>

<pre>./persec.py ifconfig
</pre>

<p>Now in a similar way to watch, it executes the command every second, and highlights the differences between each execution. However, in addition to this it finds any numbers that have changed and works out the rate at which they are changing. So for example, ifconfig would typically output this:</p>

<pre>usb0      Link encap:Ethernet  HWaddr 02:04:4b:00:d3:cf
          inet addr:10.0.0.2  Bcast:10.0.0.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1017422291 errors:0 dropped:0 overruns:0 frame:0
          TX packets:549382406 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:1910704266 (1.9 GB)  TX bytes:1834667124 (1.8 GB)
</pre>

<p>but now outputs something like:</p>

<pre>usb0      Link encap:Ethernet  HWaddr 02:04:4b:00:d3:cf
          inet addr:10.0.0.2  Bcast:10.0.0.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:<b>2001/s</b> errors:0 dropped:0 overruns:0 frame:0
          TX packets:<b>2002/s</b> errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:<b>168120/s</b> (1.9 GB)  TX bytes:<b>217144/s</b> (1.8 GB)
</pre>

<p>Notice the per second (/s) values for RX/TX packets and RX/TX bytes. I have found this quite useful many times in the past, on commands such as:</p>

<pre>./persec.py cat /proc/interrupts
./persec.py df
./persec.py ls -l somefile
</pre>

<p><a href="https://raw.github.com/gist/1275275/2da6db303e784bdbdb8a095cec2a374465a28779/persec.py">Download version 1.1</a> or [View on Github][3]</p>

<p>[3]: <a href="https://gist.github.com/1275275">https://gist.github.com/1275275</a></p>

   </div>
 </div>


 <a href="https://twitter.com/share" class="twitter-share-button " data-size="small" data-count="none">Tweet</a>
 <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

 <ul class="pager">
      &nbsp;<li class="previous"><a href="http://bramp.net/blog/2010/09/06/ifconfig-stats-gotcha/">&larr; ifconfig stats gotcha</a></li>
      &nbsp;<li class="next"><a href="http://bramp.net/blog/2010/08/30/converting-mbr-to-gpt-without-deleting-your-partitions/"> Converting MBR to GPT without deleting your partitions &rarr;</a></li>
</ul>

<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost" || window.location.port == 1313) 
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = '';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    <footer>
        <p class="text-muted credit">&copy; 2015. All rights reserved. </p>
    </footer>

    </div> 
    </div> 

	
    <script src="http://bramp.net/blog/js/jquery-1.10.2.min.js"></script>
    <script src="http://bramp.net/blog/js/bootstrap.min.js"></script>
  </body>
</html>

