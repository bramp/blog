<!DOCTYPE html>
<html lang=en>
<head itemscope itemtype=http://schema.org/WebSite>
<meta charset=utf-8>
<meta content="width=device-width,initial-scale=1" name=viewport>
<link href=https://blog.bramp.net/post/2010/05/23/android-linux-sdk-revision-6-aapt-library-bug/ rel=canonical itemprop=url />
<title>Android Linux SDK revision 6 aapt library bug</title>
<meta content="UPDATE &#8211; I reported this bug and it was promptly fixed the next day. Read the bug report for solution on how to fix.
Android 2.2 just came out and along with it came a updated set of SDK tools. …" name=description itemprop=description>
<meta content="Andrew Brampton" name=author itemprop=creator>
<meta content="" name=generator />
<link href=https://blog.bramp.net/index.xml rel=alternate type=application/rss+xml title=bramp.net />
<link href=https://blog.bramp.net/index.xml rel=feed type=application/rss+xml title=bramp.net />
<link href=/favicon.ico rel="shortcut icon" type=image/x-icon />
<link href=/images/favicon.png rel=apple-touch-icon-precomposed />
<link href=/images/favicon-57x57.png rel=apple-touch-icon-precomposed sizes=57x57 />
<link href=/images/favicon-72x72.png rel=apple-touch-icon-precomposed sizes=72x72 />
<link href=/images/favicon-76x76.png rel=apple-touch-icon-precomposed sizes=76x76 />
<link href=/images/favicon-114x114.png rel=apple-touch-icon-precomposed sizes=114x114 />
<link href=/images/favicon-120x120.png rel=apple-touch-icon-precomposed sizes=120x120 />
<link href=/images/favicon-144x144.png rel=apple-touch-icon-precomposed sizes=144x144 />
<link href=/images/favicon-152x152.png rel=apple-touch-icon-precomposed sizes=152x152 />
<link href=/images/favicon-180x180.png rel=apple-touch-icon-precomposed sizes=180x180 />
<meta content=#4582EC name=msapplication-TileColor>
<meta content=/images/favicon-144x144.png name=msapplication-TileImage>
<meta content=#4582EC name=theme-color>
<link href=/images/favicon-192x192.png rel=icon sizes=192x192 />
<link href=/css/all.8a33ce77e7fb9fc4d8f9e0b776f593eb.min.css rel=stylesheet>
<link href=https://cdn.jsdelivr.net/font-hack/2.010/css/hack.min.css rel=stylesheet>
<meta content=summary name=twitter:card />
<meta content=@TheBramp name=twitter:site />
<meta content=@TheBramp name=twitter:creator />
<meta content=article property=og:type />
<meta content=https://www.facebook.com/bramp property=article:author />
<meta content=2010-05-23T00:00:00&#43;07:00 property=article:published_time />
<meta content=aapt property=article:tag />
<meta content=android property=article:tag />
<meta content=bug property=article:tag />
<meta content=sdk property=article:tag />
<meta content=https://blog.bramp.net/post/2010/05/23/android-linux-sdk-revision-6-aapt-library-bug/ property=og:url />
<meta content=bramp.net property=og:site_name />
<meta content="Android Linux SDK revision 6 aapt library bug" property=og:title />
<meta content="UPDATE &#8211; I reported this bug and it was promptly fixed the next day. Read the bug report for solution on how to fix.
Android 2.2 just came out and along with it came a updated set of SDK tools. …" property=og:description />
<meta content=2010-05-23T00:00:00&#43;00:00 property=og:updated_time />
<meta content=en_GB property=og:locale />
<meta content=RXqIC-7spNUYReoHFlubz8Fbqsg1fC1pE6FSgSnCNjQ name=google-site-verification />
</head>
<body itemscope itemtype=Blog>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-136478-5', 'auto');
    ga('require', 'linkid', 'linkid.js');
    ga('send', 'pageview');
</script>
<div id=wrapper>
<div class="navbar navbar-default">
<div class=container>
<div class=navbar-header>
<button class=navbar-toggle data-target=.navbar-collapse data-toggle=collapse type=button>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<div class=navbar-brand aria-label="About Andrew Brampton">
<a href=/ >
<img alt=Home class=profile-image src=/images/favicon-64x64.png>
</a>
<div itemprop=author itemscope itemtype=https://schema.org/Person>
<a href=/about-me/ itemprop=name>Andrew Brampton</a>
<div id=social-wrapper>
<a href=https://twitter.com/TheBramp aria-label=Twitter><svg class="icon icon-twitter-square"><use xlink:href=/images/icons.svg#icon-twitter-square></use></svg></a>
<a href=https://www.linkedin.com/in/bramp aria-label=LinkedIn><svg class="icon icon-linkedin-square"><use xlink:href=/images/icons.svg#icon-linkedin-square></use></svg></a>
<a href=https://www.facebook.com/bramp aria-label=Facebook><svg class="icon icon-facebook-square"><use xlink:href=/images/icons.svg#icon-facebook-square></use></svg></a>
<a href=https://github.com/bramp aria-label=GitHub><svg class="icon icon-github-square"><use xlink:href=/images/icons.svg#icon-github-square></use></svg></a>
<a href=https://feeds.feedburner.com/brampnet aria-label="RSS feed"><svg class="icon icon-github-square"><use xlink:href=/images/icons.svg#icon-rss-square></use></svg></a>
</div>
</div>
</div>
</div>
<div class="collapse navbar-collapse">
<ul class="nav navbar-nav" role=navigation>
<li><a href=/ >Articles</a></li>
<li><a href=/about-me/ >About Me</a></li>
<li><a href=/android-app/ >Android Apps</a></li>
<li><a href=/opensource/ >Open Source</a></li>
<li><a href=/publication/ >Publications</a></li>
</ul>
</div>
</div>
</div>
<div class="container main">
<article id=article itemProp=blogPost itemscope itemtype=http://schema.org/BlogPosting>
<h1 itemprop=headline>Android Linux SDK revision 6 aapt library bug</h1>
<p class=meta>
<svg class="icon icon-calendar"><use xlink:href=/images/icons.svg#icon-calendar></use></svg> <time itemprop=datePublished>2010-05-23</time>
| <a href=https://blog.bramp.net/tags/aapt/ >aapt</a>
| <a href=https://blog.bramp.net/tags/android/ >android</a>
| <a href=https://blog.bramp.net/tags/bug/ >bug</a>
| <a href=https://blog.bramp.net/tags/sdk/ >sdk</a>
</p>
<div class=post itemprop=articleBody>
<p><strong>UPDATE &#8211; I <a href="http://code.google.com/p/android/issues/detail?id=8498">reported this bug</a> and it was promptly fixed the next day. Read the <a href="http://code.google.com/p/android/issues/detail?id=8498">bug report</a> for solution on how to fix.</strong></p>
<p><a href=http://android-developers.blogspot.com/2010/05/android-22-and-developers-goodies.html>Android 2.2</a> just came out and along with it came a updated set of <a href=http://developer.android.com/sdk/tools-notes.html>SDK tools</a>. I&#8217;ve been using these tools on Windows, but today I took my Linux laptop out and I&#8217;ve been sat in a <a href=http://www.juicafe.co.uk/ >coffee shop</a> hyped up on caffeine but completely unproductive because I&#8217;m going round in circles with what I think is a bug.</p>
<p>So, I&#8217;m trying the <a href=http://developer.android.com/guide/developing/other-ide.html#libraryProject>new library feature</a>, where you can have a Android library project, which is referenced by one or more Android projects. This allows multiple projects to easily share the same code. The problem is when I set-up my Android project to use a library project I get the following error printed in my eclipse console:</p>
<div class=highlight><pre class=chroma><code class=language-text data-lang=text>ERROR: Unknown option &#39;--auto-add-overlay&#39;
Android Asset Packaging Tool</code></pre></div>
<p>and the code fails to compile. If I remove the reference to the library project this error goes away.</p>
<p>The error is coming from the aapt command, which seems to be installed multiple times, once for each SDK version:</p>
<div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ locate -r <span class=s2>&#34;aapt</span>$<span class=s2>&#34;</span>
/home/bramp/android-sdk-linux_86/platforms/android-3/tools/aapt
/home/bramp/android-sdk-linux_86/platforms/android-4/tools/aapt
/home/bramp/android-sdk-linux_86/platforms/android-7/tools/aapt
/home/bramp/android-sdk-linux_86/platforms/android-8/tools/aapt</code></pre></div>
<p>Checking each command I see that only versions 7 and 8 have the <em>&#8211;auto-add-overlay</em> option. Both my library and main projects are targeted at Android 1.6 (i.e. android-4). I tried re-targeting my main project to Android 2.2 (i.e. android-8) and the problem seems to go away.</p>
<p>So for the moment this seems an annoyance, but I can live with it by setting my target to 2.2. Hopefully Google will release a fix so I can still use the older targets with the new library feature.</p>
<p><strong>Just a quick update:</strong><br/>
I noticed that on Windows all versions of the aapt tool support the &#8216;&#8211;auto-add-overlay&#8217; option. So what I suspect has happened is that someone forgot to update the aapt binary for the old platforms.</p>
</div>
</article>
<div class=row>
<div class=col-sm-6>
<div class=addthis_sharing_toolbox></div>
</div>
<div class=col-sm-6>
<div class=btn-toolbar>
<div class=btn-group>
<a href=https://feeds.feedburner.com/brampnet aria-label="RSS feed" class="btn btn-sm btn-soundcloud"><svg class="icon icon-rss"><use xlink:href=/images/icons.svg#icon-rss></use></svg> Subscribe via RSS</a>
</div>
<div class=btn-group>
<a href=https://twitter.com/TheBramp class="btn btn-sm btn-twitter"><svg class="icon icon-twitter"><use xlink:href=/images/icons.svg#icon-twitter></use></svg> Follow @TheBramp</a>
</div>
</div>
</div>
</div>
<ul class=pager>
&nbsp;<li class=previous><a href=/post/2010/05/11/python-close_fds-issue/ >&larr; Python close_fds issue</a></li>
&nbsp;<li class=next><a href=/post/2010/05/24/fullscreen-hack-for-flash-10.1/ >Fullscreen Hack for Flash 10.1 &rarr;</a></li>
</ul>
<div id=disqus_thread itemprop=comment itemscope itemtype=Comment></div>
<script type=text/javascript>
var disqus_shortname = 'bramp';
    var disqus_identifier = 'https:\/\/blog.bramp.net\/post\/2010\/05\/23\/android-linux-sdk-revision-6-aapt-library-bug\/';
    var disqus_title = 'Android Linux SDK revision 6 aapt library bug';
    var disqus_url = 'https:\/\/blog.bramp.net\/post\/2010\/05\/23\/android-linux-sdk-revision-6-aapt-library-bug\/';
    (function() {
	    
	    
	    if (window.location.host.lastIndexOf(":1313") >= 0)
	        return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
<br/>
<footer>
<p class="credit text-muted">&copy; 2018. All rights reserved.</p>
</footer>
</div>
</div>
<script src=/js/all.421bdc0798a792d922b399e8180168e3.min.js></script>
<script src="https://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-559846a374d7ecaa" async type=text/javascript></script>
</body>
</html>
