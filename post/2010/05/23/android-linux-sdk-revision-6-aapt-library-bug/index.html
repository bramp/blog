<!DOCTYPE html><html lang=en><head><meta charset=utf-8><title>Android Linux SDK revision 6 aapt library bug</title><meta name=description content=""><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo"/><link rel=canonical href="http://blog.bramp.net/post/2010/05/23/android-linux-sdk-revision-6-aapt-library-bug/"/><link href="" rel=alternate type=application/rss+xml title="Android Linux SDK revision 6 aapt library bug"/><link href=/css/bootstrap.min.css rel=stylesheet><link href=/css/bramp.css rel=stylesheet><link href=/css/pygments-friendly.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css rel=stylesheet><meta name=twitter:card content="summary"/><meta name=twitter:site content="@TheBramp"/><meta name=twitter:title content="Android Linux SDK revision 6 aapt library bug"/><meta name=twitter:description content=""/><body><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-136478-5', 'auto');
    ga('send', 'pageview');</script><div id=wrapper><div class="navbar navbar-default" role=navigation><div class=container><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse><span class=sr-only>Toggle navigation</span>   </button><div class=navbar-brand><a href="/"><img src="//secure.gravatar.com/avatar/69259b422a1a9266e17977f8ec9d939e?s=64" class=profile-image alt=Home></a><div><a href="/about-me/">Andrew Brampton</a><div id=social-wrapper><a href=https://twitter.com/TheBramp></a> <a href=https://www.linkedin.com/in/bramp></a> <a href=https://www.facebook.com/bramp></a> <a href=https://github.com/bramp></a> <a href=/index.xml></a></div></div></div></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="/">Articles</a></li><li><a href="/about-me/">About Me</a></li><li><a href="/android-app/">Android Apps</a></li><li><a href="/opensource-project/">Open Source</a></li><li><a href="/publication/">Publications</a></li></ul></div></div></div><div class="container main"><div id=article><h1>Android Linux SDK revision 6 aapt library bug</h1><p class=meta> 2010-05-23 | <a href=http://blog.bramp.net/tags/aapt>aapt</a> | <a href=http://blog.bramp.net/tags/android>android</a> | <a href=http://blog.bramp.net/tags/bug>bug</a> | <a href=http://blog.bramp.net/tags/sdk>sdk</a></p><div class=post><p><strong>UPDATE &#8211; I <a href="http://code.google.com/p/android/issues/detail?id=8498">reported this bug</a> and it was promptly fixed the next day. Read the <a href="http://code.google.com/p/android/issues/detail?id=8498">bug report</a> for solution on how to fix.</strong></p><p><a href=http://android-developers.blogspot.com/2010/05/android-22-and-developers-goodies.html>Android 2.2</a> just came out and along with it came a updated set of <a href=http://developer.android.com/sdk/tools-notes.html>SDK tools</a>. I&#8217;ve been using these tools on Windows, but today I took my Linux laptop out and I&#8217;ve been sat in a <a href="http://www.juicafe.co.uk/">coffee shop</a> hyped up on caffeine but completely unproductive because I&#8217;m going round in circles with what I think is a bug.</p><p>So, I&#8217;m trying the <a href=http://developer.android.com/guide/developing/other-ide.html#libraryProject>new library feature</a>, where you can have a Android library project, which is referenced by one or more Android projects. This allows multiple projects to easily share the same code. The problem is when I set-up my Android project to use a library project I get the following error printed in my eclipse console:</p><div class=highlight><pre>ERROR: Unknown option &#39;--auto-add-overlay&#39;
Android Asset Packaging Tool
</pre></div><p>and the code fails to compile. If I remove the reference to the library project this error goes away.</p><p>The error is coming from the aapt command, which seems to be installed multiple times, once for each SDK version:</p><div class=highlight><pre><span class=nv>$ </span>locate -r <span class=s2>&quot;aapt</span><span class=nv>$&quot;</span>
<span class=s2>/home/bramp/android-sdk-linux_86/platforms/android-3/tools/aapt</span>
<span class=s2>/home/bramp/android-sdk-linux_86/platforms/android-4/tools/aapt</span>
<span class=s2>/home/bramp/android-sdk-linux_86/platforms/android-7/tools/aapt</span>
<span class=s2>/home/bramp/android-sdk-linux_86/platforms/android-8/tools/aapt</span>
</pre></div><p>Checking each command I see that only versions 7 and 8 have the <em>&#8211;auto-add-overlay</em> option. Both my library and main projects are targeted at Android 1.6 (i.e. android-4). I tried re-targeting my main project to Android 2.2 (i.e. android-8) and the problem seems to go away.</p><p>So for the moment this seems an annoyance, but I can live with it by setting my target to 2.2. Hopefully Google will release a fix so I can still use the older targets with the new library feature.</p><p><strong>Just a quick update:</strong><br/>I noticed that on Windows all versions of the aapt tool support the &#8216;&#8211;auto-add-overlay&#8217; option. So what I suspect has happened is that someone forgot to update the aapt binary for the old platforms.</p></div></div><ul class=pager>&nbsp;<li class=previous><a href="/post/2010/05/11/python-close_fds-issue/">&larr; Python close_fds issue</a></li>&nbsp;<li class=next><a href="/post/2010/05/24/fullscreen-hack-for-flash-10.1/">Fullscreen Hack for Flash 10.1 &rarr;</a></li></ul><script type=text/javascript>(function() {
    
    
    if (window.location.hostname == "localhost" || window.location.port == 1313) 
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'bramp';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href=http://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a><br/><footer><p class="text-muted credit">&copy; 2015. All rights reserved.</p></footer></div></div><script src=/js/jquery-1.10.2.min.js></script><script src=/js/bootstrap.min.js></script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-559846a374d7ecaa" async></script>